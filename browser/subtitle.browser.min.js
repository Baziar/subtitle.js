!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.Subtitle=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var toMS=require("./toMS"),toSrtTime=require("./toSrtTime");module.exports=function(subtitles,caption){if(!caption.start||!caption.end||!caption.text)throw new Error("Invalid caption data");for(var prop in caption)if(caption.hasOwnProperty(prop)&&"text"!==prop&&("start"===prop||"end"===prop)){if(/^(\d{2}):(\d{2}):(\d{2}),(\d{3})$/.test(caption[prop]))continue;if(!/^\d+$/.test(caption[prop]))throw new Error("Invalid caption time format");caption[prop]=toSrtTime(caption[prop])}return subtitles.push({index:subtitles.length+1,start:caption.start,end:caption.end,duration:toMS(caption.end)-toMS(caption.start),text:caption.text}),subtitles}},{"./toMS":6,"./toSrtTime":7}],2:[function(require,module,exports){var extend=require("xtend/immutable"),toMS=require("./toMS"),defaults={timeFormat:"srt",duration:!1};module.exports=function(subtitles,options){return options=extend(defaults,options),"ms"===options.timeFormat&&(subtitles=subtitles.map(function(caption){return caption.start=toMS(caption.start),caption.end=toMS(caption.end),caption})),options.duration||(subtitles=subtitles.map(function(caption){return delete caption.duration,caption})),subtitles}},{"./toMS":6,"xtend/immutable":8}],3:[function(require,module,exports){var toMS=require("./toMS");module.exports=function(srt){var index,time,text,start,end,subs=[];if(!srt)throw new Error("No SRT to parse");return srt=srt.trim(),srt+="\n",srt=srt.replace(/\r\n/g,"\n").replace(/\n{3,}/g,"\n\n").split("\n"),srt.forEach(function(line){if(line=line.toString(),!index&&/^\d+$/.test(line))return void(index=parseInt(line));if(!time){var match=line.match(/^(\d{2}:\d{2}:\d{2},\d{3}) --> (\d{2}:\d{2}:\d{2},\d{3})$/);if(match)return start=match[1],end=match[2],void(time=!0)}""===line.trim()?(subs.push({index:index,start:start,end:end,duration:toMS(end)-toMS(start),text:text||""}),index=time=start=end=text=null):text?text+="\n"+line:text=line}),subs}},{"./toMS":6}],4:[function(require,module,exports){var toMS=require("./toMS"),toSrtTime=require("./toSrtTime");module.exports=function(subtitles,time){if(!/(-|\+)?\d+/.test(time.toString()))throw new Error("Invalid time: "+time+".Expected a valid integer");return time=parseInt(time,10),subtitles.map(function(caption){var start=toMS(caption.start),end=toMS(caption.end);return start+=time,end+=time,caption.start=toSrtTime(start<0?0:start),caption.end=toSrtTime(end<0?0:end),caption})}},{"./toMS":6,"./toSrtTime":7}],5:[function(require,module,exports){module.exports=function(subtitles){var buffer="";return subtitles.forEach(function(caption,index){index>0&&(buffer+="\n"),buffer+=caption.index,buffer+="\n",buffer+=caption.start+" --> "+caption.end,buffer+="\n",buffer+=caption.text,buffer+="\n"}),buffer}},{}],6:[function(require,module,exports){module.exports=function(srtTime){var match=srtTime.match(/^(\d{2}):(\d{2}):(\d{2}),(\d{3})$/);if(!match)throw new Error("Invalid SRT time format");var hours=parseInt(match[1],10),minutes=parseInt(match[2],10),seconds=parseInt(match[3],10),milliseconds=parseInt(match[4],10);return hours*=36e5,minutes*=6e4,seconds*=1e3,hours+minutes+seconds+milliseconds}},{}],7:[function(require,module,exports){module.exports=function(milliseconds){if(!/^\d+$/.test(milliseconds.toString()))throw new Error("Time should be an Integer value in milliseconds");milliseconds=parseInt(milliseconds);var date=new Date(0,0,0,0,0,0,milliseconds),hours=date.getHours()<10?"0"+date.getHours():date.getHours(),minutes=date.getMinutes()<10?"0"+date.getMinutes():date.getMinutes(),seconds=date.getSeconds()<10?"0"+date.getSeconds():date.getSeconds(),ms=milliseconds-(36e5*hours+6e4*minutes+1e3*seconds);ms<100&&ms>=10?ms="0"+ms:ms<10&&(ms="00"+ms);var srtTime=hours+":"+minutes+":"+seconds+","+ms;return srtTime}},{}],8:[function(require,module,exports){function extend(){for(var target={},i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source)hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty},{}],9:[function(require,module,exports){"use strict";function Subtitle(srt){return this instanceof Subtitle?(this._subtitles=[],void(srt&&this.parse(srt))):new Subtitle(srt)}var toMS=require("./lib/toMS"),toSrtTime=require("./lib/toSrtTime"),parse=require("./lib/parse"),stringify=require("./lib/stringify"),resync=require("./lib/resync"),getSubtitles=require("./lib/getSubtitles"),add=require("./lib/add");module.exports=Subtitle;var fn=Subtitle.prototype;fn.parse=function(srt){this._subtitles=parse(srt)},fn.add=function(caption){return add(this._subtitles,caption),this},fn.getSubtitles=function(options){return getSubtitles(this._subtitles,options)},fn.stringify=function(){return stringify(this._subtitles)},fn.resync=function(time){return this._subtitles=resync(this._subtitles,time),this},Subtitle.toMS=toMS,Subtitle.toSrtTime=toSrtTime},{"./lib/add":1,"./lib/getSubtitles":2,"./lib/parse":3,"./lib/resync":4,"./lib/stringify":5,"./lib/toMS":6,"./lib/toSrtTime":7}]},{},[9])(9)});